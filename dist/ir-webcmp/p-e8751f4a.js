import{a as o}from"./p-da635c92.js";import{B as t}from"./p-13a8bd692.js";import{k as r}from"./p-a1c174d3.js";class e{constructor(){this.bookingService=new t}async reallocateEvent(t,r,e,n){try{const s=JSON.parse(sessionStorage.getItem("token"));if(s){console.log(t,r,e,n);const{data:a}=await o.post(`/ReAllocate_Exposed_Room?Ticket=${s}`,{pool:t,destination_pr_id:r,from_date:e,to_date:n});if(a.ExceptionMsg!==""){throw new Error(a.ExceptionMsg)}console.log(a);return a}else{throw new Error("Invalid Token")}}catch(o){console.error(o);throw new Error(o)}}async deleteEvent(t){try{const r=JSON.parse(sessionStorage.getItem("token"));if(r){const{data:e}=await o.post(`/UnBlock_Exposed_Unit?Ticket=${r}`,{POOL:t});if(e.ExceptionMsg!==""){throw new Error(e.ExceptionMsg)}return e.My_Result}else{throw new Error("Invalid Token")}}catch(o){console.log(o);throw new Error(o)}}async updateBlockedEvent(o){try{const t=JSON.parse(sessionStorage.getItem("token"));if(t){const t=r(+o.RELEASE_AFTER_HOURS);await this.deleteEvent(o.POOL);const e=await this.bookingService.blockUnit(Object.assign({from_date:this.formatDate(o.FROM_DATE),to_date:this.formatDate(o.TO_DATE),pr_id:o.PR_ID,STAY_STATUS_CODE:o.OUT_OF_SERVICE?"004":o.RELEASE_AFTER_HOURS===0?"002":"003",DESCRIPTION:o.RELEASE_AFTER_HOURS||"",NOTES:o.OPTIONAL_REASON||""},t));return e}else{throw new Error("Invalid Token")}}catch(o){console.error(o);throw new Error(o)}}formatDate(o){return o.split("/").join("-")}}export{e as E};
//# sourceMappingURL=p-e8751f4a.js.map
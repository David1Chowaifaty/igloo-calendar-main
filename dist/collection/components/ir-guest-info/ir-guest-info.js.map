{"version":3,"file":"ir-guest-info.js","sourceRoot":"","sources":["../../../src/components/ir-guest-info/ir-guest-info.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, State, h, Prop, EventEmitter,Event } from '@stencil/core';\r\nimport { selectOption } from '@/common/models';\r\nimport { Guest } from '@/models/booking.dto';\r\nimport { BookingService } from '@/services/booking.service';\r\nimport { ICountry, Languages } from '@/components';\r\n\r\n@Component({\r\n  tag: 'ir-guest-info',\r\n  styleUrl: 'ir-guest-info.css',\r\n})\r\nexport class GuestInfo {\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountries: selectOption[] = null;\r\n  @Prop({ mutable: true, reflect: true }) setupDataCountriesCode: selectOption[] = null;\r\n  @Prop() defaultTexts: Languages;\r\n  @Prop() language: string;\r\n  @Prop() email: string;\r\n\r\n  @State() countries: ICountry[];\r\n  @State() submit: boolean = false;\r\n  @State() guest: Guest | null = null;\r\n  @State() isLoading: boolean = false;\r\n  @Event() closeSideBar:EventEmitter<null>\r\n\r\n  private bookingService = new BookingService();\r\n\r\n  async componentWillLoad() {\r\n    await this.init();\r\n  }\r\n  async init() {\r\n    try {\r\n      const [guest, countries] = await Promise.all([this.bookingService.fetchGuest(this.email), this.bookingService.getCountries(this.language)]);\r\n      this.countries = countries;\r\n      this.guest = guest;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  handleInputChange(key: keyof Guest, value: any) {\r\n    this.guest = { ...this.guest, [key]: value };\r\n  }\r\n\r\n  async editGuest() {\r\n    try {\r\n      this.isLoading = true;\r\n      await this.bookingService.editExposedGuest(this.guest);\r\n      this.closeSideBar.emit(null)\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      this.isLoading = false;\r\n      console.log('done');\r\n    }\r\n  }\r\n  render() {\r\n   \r\n    if (!this.guest) {\r\n      return null;\r\n    }\r\n    return [\r\n      <h3>\r\n        <strong>{this.defaultTexts.entries.Lcz_GuestDetails}</strong>\r\n      </h3>,\r\n      <div class=\"card\">\r\n        <div class=\"card-content collapse show\">\r\n          <div class=\"card-body pt-0\">\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_FirstName}\r\n              name=\"firstName\"\r\n              submited={this.submit}\r\n              value={this.guest.first_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('first_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_LastName}\r\n              name=\"lastName\"\r\n              submited={this.submit}\r\n              value={this.guest.last_name}\r\n              required\r\n              onTextChange={e => this.handleInputChange('last_name', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_Email}\r\n              name=\"email\"\r\n              submited={this.submit}\r\n              value={this.guest.email}\r\n              required\r\n              onTextChange={e => this.handleInputChange('email', e.detail)}\r\n            ></ir-input-text>\r\n            <ir-input-text\r\n              placeholder=\"\"\r\n              label={this.defaultTexts.entries.Lcz_AlternativeEmail}\r\n              name=\"altEmail\"\r\n              value={this.guest.email}\r\n              onTextChange={e => this.handleInputChange('email', e.detail)}\r\n            ></ir-input-text>\r\n            {/* <ir-input-text label=\"Password\" placeholder=\"\" name=\"password\" submited={this.submit} type=\"password\" value={this.Model.password} required></ir-input-text> */}\r\n            <ir-select\r\n              required\r\n              name=\"country\"\r\n              submited={this.submit}\r\n              label={this.defaultTexts.entries.Lcz_Country}\r\n              selectedValue={this.guest.country_id.toString()}\r\n              data={this.countries.map(item => {\r\n                return {\r\n                  value: item.id.toString(),\r\n                  text: item.name,\r\n                };\r\n              })}\r\n              firstOption={'...'}\r\n              onSelectChange={e => this.handleInputChange('country_id', e.detail)}\r\n            ></ir-select>\r\n            <ir-input-text placeholder=\"\" label={this.defaultTexts.entries.Lcz_City} name=\"city\" value={this.guest.city} onTextChange={e => this.handleInputChange('city', e.detail)}></ir-input-text>\r\n            <ir-input-text placeholder=\"\" label={this.defaultTexts.entries.Lcz_Address} name=\"address\" value={this.guest.address} onTextChange={e => this.handleInputChange('address', e.detail)}></ir-input-text>\r\n\r\n            <div class=\"form-group mr-0\">\r\n              <div class=\"input-group row m-0 p-0\">\r\n                <div class={`input-group-prepend col-3 p-0 text-dark border-none`}>\r\n                  <label class={`input-group-text  bg-light flex-grow-1 text-dark border-0 `}>\r\n                  {this.defaultTexts.entries.Lcz_MobilePhone}\r\n                    {'*'}\r\n                  </label>\r\n                </div>\r\n                <select\r\n                  class={` form-control text-md  col-2 py-0 mobilePrefixSelect`}\r\n                  onInput={e => this.handleInputChange('country_id', (e.target as HTMLSelectElement).value)}\r\n                  required\r\n                >\r\n                  <option value={null}>...</option>\r\n                  {this.countries.map(item => (\r\n                    <option selected={this.guest.country_id.toString() === item.id.toString()} value={item.id}>\r\n                      {item.phone_prefix}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <input\r\n                  type=\"text\"\r\n                  required\r\n                  value={this.guest.mobile}\r\n                  class={'form-control flex-fill mobilePrefixInput'}\r\n                  onInput={e => this.handleInputChange('mobile', (e.target as HTMLInputElement).value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class={'col-3 p-0'}>\r\n              <ir-checkbox\r\n                onCheckboxChange={e => this.handleInputChange('subscribe_to_news_letter', e.detail.checked)}\r\n                label={this.defaultTexts.entries.Lcz_Newsletter}\r\n                name=\"newsletter\"\r\n                checked={this.guest.subscribe_to_news_letter}\r\n              ></ir-checkbox>\r\n            </div>\r\n            <hr />\r\n            <ir-button text={this.defaultTexts.entries.Lcz_Save} onClickHanlder={this.editGuest.bind(this)} color=\"btn-primary\"></ir-button>\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n"]}